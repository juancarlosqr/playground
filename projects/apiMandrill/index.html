<!DOCTYPE html>
<html>
    <head>
    	<title>Send a Text Email via Mandrill</title>
    </head>
    <body>
        <button id="send">Send the Mail</button>
        <pre id="response"></pre>

        <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
        <script type="text/javascript" src="https://mandrillapp.com/api/docs/js/mandrill.js"></script>
        <script>

        // create a function to log the response from the Mandrill API
		function log(obj)
		{
		    $('#response').text(JSON.stringify(obj));
		}

		// create a new instance of the Mandrill class with your API key
		var m = new mandrill.Mandrill('API_KEY');

		// for sending plain-text emails define a text param
		// var params = {
		//     "message": {
		//         "from_email":"jcquintero.ce@gmail.com",
		//         "to":[{"email":"juanq@codefuel.me"}],
		//         "subject": "Sending a text email from the Mandrill API",
		//         "text": "Valar Morghulis."
		//     }
		// };

		// create a variable for the API call parameters
		var params = {
		    "message": {
		        "from_email":"jcquintero.ce@gmail.com",
		        "to":[{"email":"juanq@codefuel.me"}],
		        "subject": "Wohoooo Mandrill API",
		        "html": "<p>I'm learning the <a href='https://www.mandrill.com'>Mandrill</a> API at Codecademy.</p>",
		        "autotext":true,
		        "track_opens":true,
		        "track_clicks":true
		    }
		};

		function sendTheMail()
		{
			// Send the email!
		    m.messages.send(params, function(res) {
		        log(res);
		    }, function(err) {
		        log(err);
		    });
		}

		$("#send").on("click",function (e) {
			e.preventDefault();
			sendTheMail();
		})
        </script>
    </body>
</html>